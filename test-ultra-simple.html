<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Sistema Ultra Simple</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-800">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white bg-opacity-20 backdrop-blur-lg rounded-2xl p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-white mb-2">🧪 Test Sistema Ultra Simple</h1>
                <p class="text-white text-opacity-80">Verificación de carga de usuarios reales</p>
            </div>

            <div class="mb-6">
                <div class="bg-black bg-opacity-20 rounded-lg p-4 mb-4">
                    <h3 class="text-white font-bold mb-2">📊 Estado:</h3>
                    <div id="status" class="text-white">Listo para probar</div>
                </div>

                <button id="testBtn" class="w-full bg-green-500 bg-opacity-60 text-white py-3 px-6 rounded-lg hover:bg-opacity-80 transition-all duration-300 mb-4">
                    🚀 Probar Carga de Usuarios
                </button>

                <div class="text-center text-white mb-4">
                    Total usuarios: <span id="total-users" class="font-bold">-</span>
                </div>
            </div>

            <!-- Tabla de usuarios -->
            <div class="bg-black bg-opacity-20 rounded-lg overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-600">
                    <h3 class="text-white font-bold">👥 Usuarios Reales</h3>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-700">
                            <tr>
                                <th class="px-4 py-3 text-left text-white">Email</th>
                                <th class="px-4 py-3 text-left text-white">Nombre</th>
                                <th class="px-4 py-3 text-left text-white">Registro</th>
                                <th class="px-4 py-3 text-left text-white">Estado</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body" class="divide-y divide-gray-700">
                            <tr>
                                <td colspan="4" class="text-center py-8 text-gray-400">
                                    Haz clic en "Probar Carga de Usuarios" para comenzar
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="log" class="mt-6 p-4 rounded-lg bg-black bg-opacity-30 text-white text-sm max-h-60 overflow-y-auto">
                <h3 class="font-bold mb-2">📋 Log de Pruebas:</h3>
                <div id="logContent"></div>
            </div>
        </div>
    </div>

    <script src="js/sistema-ultra-simple.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        const logContent = document.getElementById('logContent');
        const testBtn = document.getElementById('testBtn');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-blue-300',
                success: 'text-green-300', 
                error: 'text-red-300',
                warning: 'text-yellow-300'
            };
            
            logContent.innerHTML += `<div class="${colors[type]}">${timestamp}: ${message}</div>`;
            logContent.scrollTop = logContent.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function updateStatus(message) {
            statusDiv.textContent = message;
        }

        // Función de notificación simple
        window.showNotification = function(message, type = 'info') {
            log(`[NOTIFICATION] ${message}`, type);
        };

        testBtn.addEventListener('click', async () => {
            log('🧪 Iniciando prueba del sistema ultra simple', 'info');
            updateStatus('Ejecutando prueba...');
            testBtn.disabled = true;
            testBtn.textContent = '⏳ Probando...';
            
            try {
                await cargarUsuariosRealesUltraSimple();
                updateStatus('✅ Prueba completada');
            } catch (error) {
                log(`❌ Error en prueba: ${error.message}`, 'error');
                updateStatus('❌ Error en prueba');
            } finally {
                testBtn.disabled = false;
                testBtn.textContent = '🚀 Probar Carga de Usuarios';
            }
        });

        log('🚀 Página de prueba cargada', 'info');
        updateStatus('Listo para probar');
    </script>
</body>
</html>
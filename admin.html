<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración - YA ME VI</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/favicon-circle.svg?v=6">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2226536008153511"
     crossorigin="anonymous"></script>

  <style>
    body {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e40af 100%);
      min-height: 100vh;
    }
    
    .admin-card {
      backdrop-filter: blur(10px);
      background: rgba(31, 41, 55, 0.8);
      border: 1px solid rgba(156, 163, 175, 0.2);
      transition: all 0.3s ease;
    }
    
    .admin-card:hover {
      background: rgba(31, 41, 55, 0.9);
      border-color: rgba(156, 163, 175, 0.4);
    }
    
    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
      animation: pulse 2s infinite;
    }
    
    .status-online { background-color: #10b981; }
    .status-offline { background-color: #ef4444; }
    .status-warning { background-color: #f59e0b; }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
  </style>
</head>
<body class="text-white">
  <div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
      <div>
        <h1 class="text-4xl font-bold text-white mb-2">📊 Panel de Administración</h1>
        <p class="text-blue-200">YA ME VI - Sistema de Control</p>
      </div>
      <div class="flex items-center space-x-4">
        <div class="flex items-center">
          <span class="status-indicator status-warning" id="connection-indicator"></span>
          <div id="admin-status" class="text-yellow-400 font-medium">🔄 Verificando...</div>
        </div>
        <button onclick="window.location.href='index.html'" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg">
          🏠 Home
        </button>
      </div>
    </div>

    <!-- System Status -->
    <div class="admin-card p-4 rounded-lg mb-8">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <span class="status-indicator status-warning" id="system-status-indicator"></span>
          <span id="system-status" class="text-blue-200">🔄 Inicializando...</span>
        </div>
        <div id="last-update" class="text-gray-400 text-sm">--</div>
      </div>
    </div>

    <!-- Metrics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Total Users -->
      <div class="admin-card p-6 rounded-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-400 text-sm">Usuarios Activos</p>
            <p id="total-users" class="text-3xl font-bold text-green-400">0</p>
          </div>
          <div class="bg-green-500 p-3 rounded-full">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Daily Queries -->
      <div class="admin-card p-6 rounded-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-400 text-sm">Consultas Hoy</p>
            <p id="daily-queries" class="text-3xl font-bold text-blue-400">0</p>
          </div>
          <div class="bg-blue-500 p-3 rounded-full">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Total Analysis -->
      <div class="admin-card p-6 rounded-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-400 text-sm">Análisis Total</p>
            <p id="total-analysis" class="text-3xl font-bold text-yellow-400">0</p>
          </div>
          <div class="bg-yellow-500 p-3 rounded-full">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Database Records -->
      <div class="admin-card p-6 rounded-lg">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-400 text-sm">Registros en DB</p>
            <p id="db-records" class="text-3xl font-bold text-purple-400">0</p>
          </div>
          <div class="bg-purple-500 p-3 rounded-full">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Notifications Section -->
    <div class="admin-card p-6 rounded-lg mb-8">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-semibold">🔔 Sistema de Notificaciones</h3>
        <span class="text-sm text-gray-400">Inicializando...</span>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-400 text-sm">Push Enviadas</p>
              <p id="push-sent" class="text-2xl font-bold text-blue-400">0</p>
            </div>
            <div class="text-blue-400">📧</div>
          </div>
        </div>
        
        <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-400 text-sm">In-App Activas</p>
              <p id="inapp-active" class="text-2xl font-bold text-green-400">0</p>
            </div>
            <div class="text-green-400">📱</div>
          </div>
        </div>
        
        <div class="bg-gray-800 bg-opacity-50 p-4 rounded-lg">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-400 text-sm">Emails Enviados</p>
              <p id="emails-sent" class="text-2xl font-bold text-yellow-400">0</p>
            </div>
            <div class="text-yellow-400">✉️</div>
          </div>
        </div>
      </div>
      
      <!-- Notification Creation -->
      <div class="border-t border-gray-600 pt-6">
        <h4 class="text-lg font-medium mb-4">✏️ Crear Nueva Notificación</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-400 mb-2">Título</label>
            <input type="text" id="notification-title" placeholder="Nuevas Predicciones Disponibles" 
                   class="w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-400 mb-2">Tipo</label>
            <select id="notification-type" class="w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-blue-500 focus:outline-none">
              <option value="general">🔔 General</option>
              <option value="prediction">🎯 Predicción</option>
              <option value="maintenance">⚙️ Mantenimiento</option>
            </select>
          </div>
        </div>
        <div class="mt-4">
          <label class="block text-sm font-medium text-gray-400 mb-2">Mensaje</label>
          <textarea id="notification-message" rows="3" placeholder="Escribe el mensaje..."
                    class="w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"></textarea>
        </div>
        <div class="mt-4 flex justify-end">
          <button onclick="sendNotification()" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition-colors">
            📤 Enviar Notificación
          </button>
        </div>
      </div>
    </div>

    <!-- Users Table -->
    <div class="admin-card p-6 rounded-lg mb-8">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold">👥 Usuarios Recientes</h3>
        <div class="text-sm text-gray-400">
          <span id="users-count">0</span> usuarios registrados
        </div>
      </div>
      
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-gray-600">
              <th class="text-left py-3 px-4 font-medium text-gray-300">Email</th>
              <th class="text-left py-3 px-4 font-medium text-gray-300">Nombre</th>
              <th class="text-left py-3 px-4 font-medium text-gray-300">Registro</th>
              <th class="text-left py-3 px-4 font-medium text-gray-300">Estado</th>
            </tr>
          </thead>
          <tbody id="users-table-body">
            <tr>
              <td colspan="4" class="text-center py-8 text-gray-400">
                🔄 Cargando usuarios...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="admin-card p-6 rounded-lg">
      <h3 class="text-xl font-semibold mb-6">⚡ Acciones Rápidas</h3>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <button onclick="refreshAllData()" class="bg-blue-600 hover:bg-blue-700 p-4 rounded-lg transition-colors text-center">
          <div class="text-2xl mb-2">🔄</div>
          <div class="font-medium">Actualizar</div>
        </button>
        
        <button onclick="exportData()" class="bg-green-600 hover:bg-green-700 p-4 rounded-lg transition-colors text-center">
          <div class="text-2xl mb-2">📊</div>
          <div class="font-medium">Exportar</div>
        </button>
        
        <button onclick="viewLogs()" class="bg-orange-600 hover:bg-orange-700 p-4 rounded-lg transition-colors text-center">
          <div class="text-2xl mb-2">📋</div>
          <div class="font-medium">Ver Logs</div>
        </button>
        
        <button onclick="manageDB()" class="bg-purple-600 hover:bg-purple-700 p-4 rounded-lg transition-colors text-center">
          <div class="text-2xl mb-2">🗄️</div>
          <div class="font-medium">Gestionar DB</div>
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // === CONFIGURACIÓN FIREBASE ===
    const firebaseConfig = {
      apiKey: "AIzaSyB4bCGyyPuQo-3-ONMPFKtqPEJDFl8Cb54",
      authDomain: "ya-me-vi.firebaseapp.com",
      projectId: "ya-me-vi",
      storageBucket: "ya-me-vi.firebasestorage.app",
      messagingSenderId: "748876890843",
      appId: "1:748876890843:web:070d1eb476d38594d002fe"
    };

    // === ADMIN EMAILS AUTORIZADOS ===
    const ADMIN_EMAILS = [
      'gfigueroa.w@gmail.com',
      'eugenfw@gmail.com', 
      'admin@yamevi.com.mx',
      'guillermo.figueroaw@totalplay.com.mx'
    ];

    // === VARIABLES GLOBALES ===
    let currentUser = null;
    let isUserAdmin = false;
    let app = null;
    let auth = null;
    let db = null;

    // === FUNCIONES UTILIDAD ===
    function updateIndicator(id, status) {
      const indicator = document.getElementById(id);
      if (indicator) {
        indicator.className = `status-indicator status-${status}`;
      }
    }

    function formatDate(timestamp) {
      if (!timestamp) return 'N/A';
      try {
        const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
        return date.toLocaleDateString('es-MX', {
          year: 'numeric',
          month: 'short',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
      } catch (error) {
        return 'N/A';
      }
    }

    function showError(message) {
      console.error('❌ Error:', message);
      document.getElementById('system-status').textContent = `❌ ${message}`;
      updateIndicator('system-status-indicator', 'offline');
    }

    function showSuccess(message) {
      console.log('✅', message);
      document.getElementById('system-status').textContent = `✅ ${message}`;
      updateIndicator('system-status-indicator', 'online');
    }

    // === VERIFICACIÓN DE ADMIN ===
    function isEmailAdmin(email) {
      if (!email) return false;
      return ADMIN_EMAILS.includes(email.toLowerCase());
    }

    // === INICIALIZACIÓN ===
    async function initializeAdmin() {
      console.log('� Inicializando panel de administración...');
      
      try {
        // Cargar Firebase dinámicamente
        const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js');
        const { getAuth, onAuthStateChanged } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js');
        const { getFirestore, collection, getDocs, doc, getDoc, query, orderBy, limit, addDoc, serverTimestamp } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js');
        
        // Inicializar Firebase
        app = initializeApp(firebaseConfig);
        auth = getAuth(app);
        db = getFirestore(app);
        
        console.log('✅ Firebase inicializado');
        
        // Escuchar cambios de autenticación
        onAuthStateChanged(auth, async (user) => {
          const statusElement = document.getElementById('admin-status');
          
          if (user) {
            currentUser = user;
            console.log('👤 Usuario conectado:', user.email);
            
            // Verificar si es admin
            isUserAdmin = isEmailAdmin(user.email);
            
            if (isUserAdmin) {
              statusElement.textContent = `✅ Admin: ${user.email}`;
              statusElement.className = 'text-green-400 font-medium';
              updateIndicator('connection-indicator', 'online');
              
              console.log('👑 Acceso de admin confirmado');
              await loadAdminData();
              startAutoRefresh();
              
            } else {
              statusElement.textContent = `❌ Sin permisos: ${user.email}`;
              statusElement.className = 'text-red-400 font-medium';
              updateIndicator('connection-indicator', 'offline');
              
              alert(`❌ Acceso denegado\\n\\nUsuario: ${user.email}\\n\\nSolo administradores autorizados pueden acceder.`);
              window.location.href = 'home.html';
            }
            
          } else {
            console.log('❌ Usuario no autenticado');
            statusElement.textContent = '🔒 No autenticado - Redirigiendo...';
            statusElement.className = 'text-yellow-400 font-medium';
            updateIndicator('connection-indicator', 'warning');
            
            setTimeout(() => {
              window.location.href = 'login.html?redirect=admin';
            }, 2000);
          }
        });
        
        // Hacer funciones globales disponibles
        window.refreshAllData = refreshAllData;
        window.sendNotification = sendNotification;
        window.exportData = exportData;
        window.viewLogs = viewLogs;
        window.manageDB = manageDB;
        
      } catch (error) {
        console.error('❌ Error inicializando Firebase:', error);
        showError('Error de conexión con Firebase');
        document.getElementById('admin-status').textContent = '❌ Error de conexión';
        document.getElementById('admin-status').className = 'text-red-400 font-medium';
      }
    }

    // === CARGAR DATOS DEL ADMIN ===
    async function loadAdminData() {
      if (!isUserAdmin || !db) return;
      
      console.log('📊 Cargando datos del admin...');
      
      try {
        await Promise.all([
          loadUsers(),
          loadStats()
        ]);
        
        showSuccess('Conectado - Firebase operativo');
        
        const now = new Date().toLocaleString('es-MX');
        document.getElementById('last-update').textContent = `Actualizado: ${now}`;
        
        console.log('✅ Todos los datos cargados');
        
      } catch (error) {
        console.error('❌ Error cargando datos:', error);
        showError('Error cargando datos');
      }
    }

    // === CARGAR USUARIOS ===
    async function loadUsers() {
      if (!db) return;
      
      try {
        const { collection, getDocs, query, orderBy, limit } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js');
        
        const usersQuery = query(collection(db, 'users'), orderBy('fechaRegistro', 'desc'), limit(50));
        const snapshot = await getDocs(usersQuery);
        
        document.getElementById('total-users').textContent = snapshot.size;
        document.getElementById('users-count').textContent = snapshot.size;
        
        const tbody = document.getElementById('users-table-body');
        tbody.innerHTML = '';
        
        if (snapshot.empty) {
          tbody.innerHTML = '<tr><td colspan="4" class="text-center py-8 text-gray-400">No hay usuarios registrados</td></tr>';
          return;
        }
        
        snapshot.forEach((doc) => {
          const data = doc.data();
          const row = document.createElement('tr');
          row.className = 'border-b border-gray-700 hover:bg-gray-800';
          
          const isAdmin = ADMIN_EMAILS.includes(data.email?.toLowerCase()) ? 
            ' <span class="ml-2 px-2 py-1 bg-yellow-600 text-xs rounded">ADMIN</span>' : '';
          
          row.innerHTML = `
            <td class="py-3 px-4">
              <div class="flex items-center">
                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">
                  ${(data.email || 'U').charAt(0).toUpperCase()}
                </div>
                <div>
                  <div class="font-medium">${data.email || 'Sin email'}${isAdmin}</div>
                  <div class="text-xs text-gray-400">${doc.id.substring(0, 8)}...</div>
                </div>
              </div>
            </td>
            <td class="py-3 px-4">${data.displayName || 'N/A'}</td>
            <td class="py-3 px-4">${formatDate(data.fechaRegistro || data.createdAt)}</td>
            <td class="py-3 px-4">
              <span class="px-2 py-1 rounded-full text-xs bg-green-600">Activo</span>
            </td>
          `;
          
          tbody.appendChild(row);
        });
        
        console.log(`✅ ${snapshot.size} usuarios cargados`);
        
      } catch (error) {
        console.error('❌ Error cargando usuarios:', error);
        document.getElementById('total-users').textContent = 'Error';
        document.getElementById('users-table-body').innerHTML = 
          '<tr><td colspan="4" class="text-center py-8 text-red-400">Error cargando usuarios</td></tr>';
      }
    }

    // === CARGAR ESTADÍSTICAS ===
    async function loadStats() {
      if (!db) return;
      
      try {
        const { collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js');
        
        // Cargar diferentes colecciones con manejo de errores individual
        const stats = {
          queries: 0,
          analysis: 0,
          dbRecords: 0,
          pushSent: 0,
          inappActive: 0,
          emailsSent: 0
        };
        
        // Consultas
        try {
          const queries = await getDocs(collection(db, 'queries'));
          stats.queries = queries.size;
        } catch (e) {
          console.warn('⚠️ No se pudo cargar queries:', e.message);
        }
        
        // Análisis
        try {
          const analysis = await getDocs(collection(db, 'analysis'));
          stats.analysis = analysis.size;
        } catch (e) {
          console.warn('⚠️ No se pudo cargar analysis:', e.message);
        }
        
        // Registros en DB (usar users como referencia)
        try {
          const users = await getDocs(collection(db, 'users'));
          stats.dbRecords = users.size;
        } catch (e) {
          console.warn('⚠️ No se pudo cargar db records:', e.message);
        }
        
        // Notificaciones push
        try {
          const push = await getDocs(collection(db, 'notifications'));
          stats.pushSent = push.size;
        } catch (e) {
          console.warn('⚠️ No se pudo cargar push notifications:', e.message);
        }
        
        // Notificaciones in-app (usar misma colección)
        stats.inappActive = Math.floor(stats.pushSent * 0.7); // Estimación
        
        // Emails (estimación basada en usuarios)
        stats.emailsSent = Math.floor(stats.dbRecords * 0.3); // Estimación
        
        // Actualizar UI
        document.getElementById('daily-queries').textContent = stats.queries;
        document.getElementById('total-analysis').textContent = stats.analysis;
        document.getElementById('db-records').textContent = stats.dbRecords;
        document.getElementById('push-sent').textContent = stats.pushSent;
        document.getElementById('inapp-active').textContent = stats.inappActive;
        document.getElementById('emails-sent').textContent = stats.emailsSent;
        
        console.log('✅ Estadísticas cargadas:', stats);
        
      } catch (error) {
        console.error('❌ Error cargando estadísticas:', error);
        // Establecer valores por defecto en caso de error
        document.getElementById('daily-queries').textContent = '0';
        document.getElementById('total-analysis').textContent = '0';
        document.getElementById('db-records').textContent = '0';
        document.getElementById('push-sent').textContent = '0';
        document.getElementById('inapp-active').textContent = '0';
        document.getElementById('emails-sent').textContent = '0';
      }
    }

    // === AUTO REFRESH ===
    function startAutoRefresh() {
      setInterval(() => {
        if (isUserAdmin && currentUser && db) {
          console.log('🔄 Auto-refresh...');
          loadAdminData();
        }
      }, 60000); // Cada minuto
    }

    // === FUNCIONES GLOBALES ===
    async function refreshAllData() {
      if (!isUserAdmin) {
        alert('❌ Sin permisos de administrador');
        return;
      }
      
      console.log('🔄 Refresh manual solicitado');
      await loadAdminData();
      alert('✅ Datos actualizados correctamente');
    }

    async function sendNotification() {
      if (!isUserAdmin || !db) {
        alert('❌ Sin permisos o conexión');
        return;
      }
      
      const title = document.getElementById('notification-title').value.trim();
      const type = document.getElementById('notification-type').value;
      const message = document.getElementById('notification-message').value.trim();
      
      if (!title || !message) {
        alert('⚠️ Por favor completa el título y mensaje');
        return;
      }
      
      try {
        const { collection, addDoc, serverTimestamp } = await import('https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js');
        
        await addDoc(collection(db, 'notifications'), {
          title,
          message,
          type,
          createdAt: serverTimestamp(),
          createdBy: currentUser.email,
          status: 'sent'
        });
        
        // Limpiar formulario
        document.getElementById('notification-title').value = '';
        document.getElementById('notification-message').value = '';
        
        alert('✅ Notificación enviada correctamente');
        
        // Recargar estadísticas
        loadStats();
        
      } catch (error) {
        console.error('❌ Error enviando notificación:', error);
        alert('❌ Error al enviar la notificación');
      }
    }

    function exportData() {
      if (!isUserAdmin) {
        alert('❌ Sin permisos de administrador');
        return;
      }
      alert('🚧 Función de exportación en desarrollo');
    }

    function viewLogs() {
      if (!isUserAdmin) {
        alert('❌ Sin permisos de administrador');
        return;
      }
      alert('🚧 Visor de logs en desarrollo');
    }

    function manageDB() {
      if (!isUserAdmin) {
        alert('❌ Sin permisos de administrador');
        return;
      }
      alert('🚧 Gestor de base de datos en desarrollo');
    }

    // === INICIALIZAR CUANDO EL DOM ESTÉ LISTO ===
    document.addEventListener('DOMContentLoaded', initializeAdmin);
    
    console.log('📋 Script de administración cargado');
  </script>
</body>
</html>

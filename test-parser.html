<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Parser</title>
</head>
<body>
  <h1>Test del Parser de Datos</h1>
  <div id="resultados"></div>
  
  <script type="module">
    import { cargarDatosHistoricos } from './js/dataParser.js';
    
    async function testParser() {
      const resultados = document.getElementById('resultados');
      
      try {
        console.log('üîç Probando carga de datos...');
        
        // Probar cada sorteo individualmente
        const sorteos = ['melate', 'revancha', 'revanchita'];
        
        for (const sorteo of sorteos) {
          console.log(`\nüìä Probando ${sorteo}:`);
          const datos = await cargarDatosHistoricos(sorteo);
          
          if (datos && datos.datos && datos.datos.length > 0) {
            console.log(`‚úÖ ${sorteo}: ${datos.datos.length} sorteos cargados`);
            console.log(`üìã Primer sorteo de ${sorteo}:`, datos.datos[0]);
            console.log(`üìã √öltimo sorteo de ${sorteo}:`, datos.datos[datos.datos.length - 1]);
            
            // Verificar que los n√∫meros son diferentes
            const primerosNumeros = datos.datos[0].numeros;
            const ultimosNumeros = datos.datos[datos.datos.length - 1].numeros;
            
            resultados.innerHTML += `
              <div style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                <h3>${sorteo.toUpperCase()}</h3>
                <p><strong>Sorteos cargados:</strong> ${datos.datos.length}</p>
                <p><strong>Primer sorteo:</strong> ${primerosNumeros.join(', ')} (Sorteo ${datos.datos[0].numeroSorteo})</p>
                <p><strong>√öltimo sorteo:</strong> ${ultimosNumeros.join(', ')} (Sorteo ${datos.datos[datos.datos.length - 1].numeroSorteo})</p>
              </div>
            `;
          } else {
            console.error(`‚ùå ${sorteo}: No se cargaron datos`);
            resultados.innerHTML += `
              <div style="border: 1px solid red; margin: 10px; padding: 10px;">
                <h3>${sorteo.toUpperCase()}</h3>
                <p style="color: red;"><strong>ERROR:</strong> No se cargaron datos</p>
              </div>
            `;
          }
        }
        
        console.log('\nüéØ Prueba completada');
        
      } catch (error) {
        console.error('‚ùå Error en la prueba:', error);
        resultados.innerHTML += `
          <div style="border: 1px solid red; margin: 10px; padding: 10px;">
            <h3>ERROR GENERAL</h3>
            <p style="color: red;">${error.message}</p>
          </div>
        `;
      }
    }
    
    // Ejecutar prueba al cargar la p√°gina
    testParser();
  </script>
</body>
</html>

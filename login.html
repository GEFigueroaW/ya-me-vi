<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YA ME VI - Iniciar sesión</title>

  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="css/styles.css" />

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <!-- Inicialización -->
  <script src="js/firebase-init.js"></script>
</head>
<body>
  <!-- Fondo dinámico -->
  <div class="background-slideshow" id="slideshow"></div>

  <section class="section is-flex is-justify-content-center is-align-items-center min-vh-100">
    <div class="box has-text-centered animate__animated animate__fadeIn">
      <h1 class="title is-3 has-text-link">🔍 YA ME VI</h1>
      <p class="subtitle">Inicia sesión para comenzar tu análisis inteligente de sorteos</p>

      <button id="loginBtn" class="button is-warning is-medium mt-4">
        <span>Iniciar sesión con Google</span>
      </button>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Fondo rotatorio
      const images = [
        "assets/bg1.jpg",
        "assets/bg2.jpg",
        "assets/bg3.jpg",
        "assets/bg4.jpg",
        "assets/bg5.jpg"
      ];
      let index = 0;
      const slideshow = document.getElementById("slideshow");

      function changeBackground() {
        slideshow.style.opacity = 0;
        setTimeout(() => {
          slideshow.style.backgroundImage = `url('${images[index]}')`;
          slideshow.style.opacity = 1;
          index = (index + 1) % images.length;
        }, 1000);
      }

      slideshow.style.backgroundImage = `url('${images[0]}')`;
      setInterval(changeBackground, 6000); // Cambio cada 6 segundos

      // Login con Google (popup)
      const loginBtn = document.getElementById("loginBtn");
      loginBtn.addEventListener("click", () => {
        const provider = new firebase.auth.GoogleAuthProvider();
        firebase.auth().signInWithPopup(provider)
          .then((result) => {
            window.location.href = "index.html";
          })
          .catch((error) => {
            console.error("Error en el login:", error);
            alert("Error al iniciar sesión. Intenta de nuevo.");
          });
      });
    });
  </script>

  <style>
    .background-slideshow {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background-size: cover;
      background-position: center;
      transition: opacity 2s ease-in-out;
    }
    .min-vh-100 {
      min-height: 100vh;
    }
  </style>
</body>
</html>

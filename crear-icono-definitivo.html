<!DOCTYPE html>
<html>
<head>
    <title>Crear Icono iOS Sin Marco - VERSI√ìN 2</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        canvas { border: 2px solid #ddd; margin: 10px 0; }
        button { background: #007AFF; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .preview { display: flex; gap: 20px; align-items: center; margin: 20px 0; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Crear Icono iOS DEFINITIVO - Sin Marco Blanco</h1>
        
        <div class="info">
            <h3>üîç DIAGN√ìSTICO:</h3>
            <p>El problema persiste porque iOS requiere un icono con <strong>fondo completamente s√≥lido</strong>.</p>
            <p>Vamos a crear un nuevo icono desde cero con fondo s√≥lido garantizado.</p>
        </div>

        <h3>üìê Configuraci√≥n del Icono:</h3>
        <label>Color de fondo: <input type="color" id="bgColor" value="#00B44F"></label><br><br>
        <label>Color del texto: <input type="color" id="textColor" value="#FFFFFF"></label><br><br>
        <label>Texto del icono: <input type="text" id="iconText" value="YA ME VI" maxlength="10"></label><br><br>
        
        <button onclick="generarIcono()">üé® Generar Icono iOS</button>
        <button onclick="descargarIcono()">üíæ Descargar como apple-touch-icon.png</button>
        
        <div class="preview">
            <div>
                <h4>Vista Previa:</h4>
                <canvas id="iconCanvas" width="180" height="180"></canvas>
            </div>
            <div>
                <h4>Simulaci√≥n iOS:</h4>
                <div style="width: 60px; height: 60px; border-radius: 13px; overflow: hidden; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
                    <canvas id="miniCanvas" width="60" height="60"></canvas>
                </div>
            </div>
        </div>

        <div class="info">
            <h3>‚úÖ CARACTER√çSTICAS DEL NUEVO ICONO:</h3>
            <ul>
                <li>üé® <strong>Fondo 100% opaco</strong> - Sin transparencia</li>
                <li>üì± <strong>Tama√±o 180x180px</strong> - Est√°ndar iOS</li>
                <li>üî≤ <strong>Formato PNG</strong> - Con canal alfa s√≥lido</li>
                <li>üéØ <strong>Sin esquinas redondeadas</strong> - iOS las aplica autom√°ticamente</li>
            </ul>
        </div>

        <h3>üìã Instrucciones:</h3>
        <ol>
            <li>Ajusta los colores y texto seg√∫n tus preferencias</li>
            <li>Haz clic en "Generar Icono iOS"</li>
            <li>Descarga el archivo como "apple-touch-icon.png"</li>
            <li>Reemplaza el archivo en la carpeta assets/</li>
            <li>Elimina y reinstala la PWA en iOS</li>
        </ol>
    </div>

    <script>
        function generarIcono() {
            const canvas = document.getElementById('iconCanvas');
            const ctx = canvas.getContext('2d');
            const miniCanvas = document.getElementById('miniCanvas');
            const miniCtx = miniCanvas.getContext('2d');
            
            const bgColor = document.getElementById('bgColor').value;
            const textColor = document.getElementById('textColor').value;
            const text = document.getElementById('iconText').value;
            
            // Canvas principal 180x180
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, 180, 180);
            
            // Texto centrado
            ctx.fillStyle = textColor;
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, 90, 90);
            
            // Canvas mini 60x60
            miniCtx.fillStyle = bgColor;
            miniCtx.fillRect(0, 0, 60, 60);
            miniCtx.fillStyle = textColor;
            miniCtx.font = 'bold 8px Arial';
            miniCtx.textAlign = 'center';
            miniCtx.textBaseline = 'middle';
            miniCtx.fillText(text, 30, 30);
            
            console.log('‚úÖ Icono generado con fondo s√≥lido:', bgColor);
        }
        
        function descargarIcono() {
            const canvas = document.getElementById('iconCanvas');
            const link = document.createElement('a');
            link.download = 'apple-touch-icon.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            console.log('üíæ Icono descargado como apple-touch-icon.png');
            alert('üéâ Icono descargado! Ahora reemplaza el archivo en assets/ y reinstala la PWA.');
        }
        
        // Generar icono inicial
        window.onload = function() {
            generarIcono();
        }
    </script>
</body>
</html>

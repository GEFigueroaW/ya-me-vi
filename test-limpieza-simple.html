<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TEST - Limpieza Simple</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-2xl font-bold mb-6">ğŸ§ª TEST - Limpieza de Campos</h1>
    
    <!-- SecciÃ³n de NÃºmero Individual -->
    <div class="bg-white rounded-lg shadow-md mb-4">
      <div id="trigger-numero" class="p-4 cursor-pointer bg-blue-50 hover:bg-blue-100 rounded-t-lg">
        <h2 class="font-bold">ğŸ” NÃºmero Individual</h2>
      </div>
      <div id="content-numero" class="p-4 hidden">
        <input type="number" id="numero-individual" class="w-24 px-3 py-2 border rounded text-black font-bold text-center" min="1" max="56">
        <button onclick="llenarNumero()" class="ml-2 px-3 py-2 bg-blue-500 text-white rounded">Llenar</button>
      </div>
    </div>
    
    <!-- SecciÃ³n de CombinaciÃ³n -->
    <div class="bg-white rounded-lg shadow-md mb-4">
      <div id="trigger-combinacion" class="p-4 cursor-pointer bg-purple-50 hover:bg-purple-100 rounded-t-lg">
        <h2 class="font-bold">ğŸ” CombinaciÃ³n</h2>
      </div>
      <div id="content-combinacion" class="p-4 hidden">
        <div class="grid grid-cols-6 gap-2 mb-4">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
          <input type="number" class="combo-input w-full px-2 py-2 border rounded text-black font-bold text-center" min="1" max="56">
        </div>
        <button onclick="llenarCombinacion()" class="px-3 py-2 bg-purple-500 text-white rounded">Llenar</button>
      </div>
    </div>
    
    <!-- Botones de Control -->
    <div class="bg-white rounded-lg shadow-md p-4">
      <h3 class="font-bold mb-2">ğŸ›ï¸ Controles</h3>
      <button onclick="LIMPIAR_TODO()" class="px-4 py-2 bg-red-500 text-white rounded mr-2">ğŸ§¹ LIMPIAR TODO</button>
      <button onclick="mostrarEstado()" class="px-4 py-2 bg-gray-500 text-white rounded mr-2">ğŸ“Š Ver Estado</button>
      <button onclick="testCompleto()" class="px-4 py-2 bg-green-500 text-white rounded">ğŸ§ª Test Completo</button>
    </div>
    
    <!-- Log de Consola -->
    <div class="bg-black text-green-400 rounded-lg p-4 mt-4 font-mono text-sm">
      <div id="log">ğŸ“ Consola de logs...</div>
    </div>
  </div>

  <script>
    let logDiv = document.getElementById('log');
    
    function log(mensaje) {
      console.log(mensaje);
      logDiv.innerHTML += '<br>' + mensaje;
      logDiv.scrollTop = logDiv.scrollHeight;
    }
    
    // FUNCIÃ“N DE LIMPIEZA SÃšPER SIMPLE
    function LIMPIAR_TODO() {
      log('ğŸ”¥ INICIANDO LIMPIEZA TOTAL...');
      
      // Encontrar TODOS los inputs de nÃºmero
      const inputs = document.querySelectorAll('input[type="number"]');
      log(`ğŸ“Š Encontrados ${inputs.length} inputs`);
      
      inputs.forEach((input, index) => {
        const valorAntes = input.value;
        
        // Limpieza mÃºltiple
        input.value = '';
        input.defaultValue = '';
        input.setAttribute('value', '');
        input.style.color = '#000000';
        
        log(`   Campo ${index + 1}: "${valorAntes}" â†’ "${input.value}"`);
      });
      
      log('âœ… LIMPIEZA COMPLETADA');
      
      // VerificaciÃ³n despuÃ©s de 1 segundo
      setTimeout(() => {
        log('ğŸ” VERIFICACIÃ“N FINAL:');
        const inputsVerif = document.querySelectorAll('input[type="number"]');
        let todoLimpio = true;
        
        inputsVerif.forEach((input, index) => {
          if (input.value !== '') {
            log(`âŒ Campo ${index + 1} AÃšN tiene: "${input.value}"`);
            todoLimpio = false;
          }
        });
        
        if (todoLimpio) {
          log('ğŸ‰ VERIFICACIÃ“N: TODOS LOS CAMPOS ESTÃN LIMPIOS');
        } else {
          log('ğŸ’¥ VERIFICACIÃ“N: ALGUNOS CAMPOS SIGUEN CON DATOS');
        }
      }, 1000);
    }
    
    function llenarNumero() {
      document.getElementById('numero-individual').value = '25';
      log('ğŸ“ NÃºmero individual llenado con: 25');
    }
    
    function llenarCombinacion() {
      const inputs = document.querySelectorAll('.combo-input');
      const numeros = [11, 23, 12, 13, 4, 5];
      
      inputs.forEach((input, index) => {
        input.value = numeros[index] || '';
      });
      
      log('ğŸ“ CombinaciÃ³n llenada con: ' + numeros.join(', '));
    }
    
    function mostrarEstado() {
      log('ğŸ” ESTADO ACTUAL:');
      
      const inputNumero = document.getElementById('numero-individual');
      log(`   NÃºmero individual: "${inputNumero.value}"`);
      
      const inputsCombinacion = document.querySelectorAll('.combo-input');
      inputsCombinacion.forEach((input, index) => {
        log(`   CombinaciÃ³n ${index + 1}: "${input.value}"`);
      });
    }
    
    function testCompleto() {
      log('ğŸ§ª INICIANDO TEST COMPLETO...');
      
      log('1ï¸âƒ£ Llenando campos...');
      llenarNumero();
      llenarCombinacion();
      
      setTimeout(() => {
        log('2ï¸âƒ£ Mostrando estado antes de limpiar...');
        mostrarEstado();
        
        setTimeout(() => {
          log('3ï¸âƒ£ Ejecutando limpieza...');
          LIMPIAR_TODO();
        }, 1000);
      }, 1000);
    }
    
    // Configurar acordeones con limpieza automÃ¡tica
    document.addEventListener('DOMContentLoaded', function() {
      const triggerNumero = document.getElementById('trigger-numero');
      const contentNumero = document.getElementById('content-numero');
      const triggerCombinacion = document.getElementById('trigger-combinacion');
      const contentCombinacion = document.getElementById('content-combinacion');
      
      triggerNumero.onclick = function() {
        const isHidden = contentNumero.classList.contains('hidden');
        
        if (isHidden) {
          // Cerrar otra secciÃ³n
          contentCombinacion.classList.add('hidden');
          
          // LIMPIAR ANTES DE ABRIR
          log('ğŸ§¹ Limpiando antes de abrir nÃºmero individual...');
          LIMPIAR_TODO();
          
          setTimeout(() => {
            contentNumero.classList.remove('hidden');
            log('ğŸ“‚ SecciÃ³n nÃºmero individual abierta');
          }, 1200);
          
        } else {
          contentNumero.classList.add('hidden');
          log('ğŸ“ SecciÃ³n nÃºmero individual cerrada');
          
          // LIMPIAR AL CERRAR
          setTimeout(() => {
            log('ğŸ§¹ Limpiando al cerrar nÃºmero individual...');
            LIMPIAR_TODO();
          }, 200);
        }
      };
      
      triggerCombinacion.onclick = function() {
        const isHidden = contentCombinacion.classList.contains('hidden');
        
        if (isHidden) {
          // Cerrar otra secciÃ³n
          contentNumero.classList.add('hidden');
          
          // LIMPIAR ANTES DE ABRIR
          log('ğŸ§¹ Limpiando antes de abrir combinaciÃ³n...');
          LIMPIAR_TODO();
          
          setTimeout(() => {
            contentCombinacion.classList.remove('hidden');
            log('ğŸ“‚ SecciÃ³n combinaciÃ³n abierta');
          }, 1200);
          
        } else {
          contentCombinacion.classList.add('hidden');
          log('ğŸ“ SecciÃ³n combinaciÃ³n cerrada');
          
          // LIMPIAR AL CERRAR
          setTimeout(() => {
            log('ğŸ§¹ Limpiando al cerrar combinaciÃ³n...');
            LIMPIAR_TODO();
          }, 200);
        }
      };
      
      log('ğŸš€ Sistema iniciado - Acordeones configurados');
    });
    
    // Hacer funciones globales
    window.LIMPIAR_TODO = LIMPIAR_TODO;
    window.mostrarEstado = mostrarEstado;
    window.testCompleto = testCompleto;
  </script>
</body>
</html>
